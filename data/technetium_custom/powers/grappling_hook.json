{
	"name": "Grapple Line",
	"description": "While large, you can fire a grappling hook to pull yourself to blocks, or entities to you.",
	"type": "origins:active_self",
	"key":"key.origins.primary_active",
	"condition":{"type":"origins:and","conditions":[
		{"type":"origins:sneaking","inverted":true},
		{"type":"origins:power_active","power":"technetium_custom:small_toggle","inverted":true}
	]},
	"cooldown": 60,
	"hud_render": {
		"sprite_location": "origins:textures/gui/community/spiderkolo/resource_bar_02.png",
		"bar_index": 3
	},
	"entity_action": {
		"type": "origins:and",
		"actions": [
			{
				"type": "origins:raycast",
				"distance": 24,
				"fluid_handling": "none",
				"block":false,
				"command_along_ray": "particle minecraft:dust 0.1 0.15 0.3 1 ~ ~ ~ 0 0 0 1 10",
				"command_step": 0.25,
				"command_along_ray_only_on_hit":true,
				"command_at_hit": "particle minecraft:dust_color_transition 0 0 0.2 3 0.6 0.6 1 ~ ~1 ~ 0.5 0.5 0.5 4 12",
				"bientity_action": {
					"type": "origins:and",
					"actions": [
						{
							"type": "origins:actor_action",
							"action": {
								"type": "origins:and",
								"actions": [
									{
										"type": "origins:play_sound",
										"sound": "minecraft:block.respawn_anchor.charge",
										"volume": 0.45,
										"pitch": 2
									},
									{
										"type": "origins:apply_effect",
										"effect": {
											"effect": "minecraft:slowness",
											"duration": 10,
											"amplifier": 9
										}
									}
								]
							}
						},
						{
							"type": "origins:target_action",
							"action": {
									"type": "origins:and",
									"actions": [
									{
										"type": "origins:play_sound",
										"sound": "minecraft:block.anvil.place",
										"volume": 0.3,
										"pitch": 0.5
									},
									{
										"type": "origins:apply_effect",
										"effect": {
											"effect": "minecraft:slowness",
											"duration": 10,
											"amplifier": 9,
											"hide_particles":true
										}
									}
								]
							}
						},
						{
							"type": "origins:delay",
							"ticks": 10,
							"action": {
								"type": "origins:and",
								"actions": [
									{
										"type": "origins:if_else",
										"condition": {
											"type": "origins:target_condition",
											"condition": {
												"type": "origins:entity_type",
												"entity_type": "minecraft:item"
											}
										},
										"if_action": {
											"type": "origins:and",
											"actions": [
												{
													"type": "origins:target_action",
													"action": {
														"type": "origins:execute_command",
														"command": "execute as @e[type=minecraft:item,distance=..4] run tag @s add lde_dredge_line"
													}
												},
												{
													"type": "origins:actor_action",
													"action": {
														"type": "origins:area_of_effect",
														"radius": 29,
														"bientity_action": {
															"type": "origins:and",
															"actions": [
																{
																	"type": "origins:add_velocity",
																	"set": true,
																	"x": 0,
																	"y": 0,
																	"z": -2.5
																},
																{
																	"type": "origins:target_action",
																	"action": {
																		"type": "origins:execute_command",
																		"command": "tag @s remove lde_dredge_line"
																	}
																}
															]
														},
														"bientity_condition": {
															"type": "origins:target_condition",
															"condition": {
																"type": "origins:command",
																"command": "execute if entity @s[tag=lde_dredge_line]",
																"comparison": "==",
																"compare_to": 1
															}
														}
													}
												}
											]
										}
									},
									{
										"type":"origins:if_else",
										"condition":{
											"type": "origins:distance",
											"comparison": "<=",
											"compare_to": 12
										},
										"if_action":{
											"type": "origins:add_velocity",
											"x": 0,
											"y": 0,
											"z": -2
										},
										"else_action":{
											"type": "origins:add_velocity",
											"x": 0,
											"y": 0,
											"z": -5
										}
									},
									{
										"type": "origins:target_action",
										"action": {
											"type": "origins:and",
											"actions": [
												{
													"type": "origins:execute_command",
													"command": "particle minecraft:dust_color_transition 0 0 0.2 1.5 0.6 0.6 1 ~ ~1 ~ 0.5 0.5 0.5 4 5"
												},
												{
													"type": "origins:play_sound",
													"sound": "minecraft:entity.iron_golem.death",
													"volume": 0.45,
													"pitch": 0.9
												}
											]
										}
									},
									{
										"type": "origins:actor_action",
										"action": {
											"type": "origins:and",
											"actions": [
												{
													"type": "origins:play_sound",
													"sound": "minecraft:entity.iron_golem.damage",
													"volume": 0.45,
													"pitch": 0.5
												}
											]
										}
									}
								]
							}
						}
					]
				},
				"miss_action": {
					"type": "origins:raycast",
					"distance": 24,
					"fluid_handling": "none",
					"shape_type": "collider",
					"entity": false,
					"command_along_ray": "particle minecraft:dust 0.1 0.15 0.3 1 ~ ~ ~ 0 0 0 1 10",
					"command_step": 0.25,
					"command_at_hit": "particle minecraft:dust_color_transition 0 0 0.2 3 0.6 0.6 1 ~ ~1 ~ 0.5 0.5 0.5 4 12",
					"block_action":{
						"type":"origins:execute_command",
						"command":"playsound minecraft:block.anvil.place player @a ~ ~ ~ 0.3 0.5",
						"typen't": "origins:play_sound",
						"sound": "minecraft:block.anvil.place",
						"volume": 0.3,
						"pitch": 0.5
					},
					"hit_action": {
						"type": "origins:and",
						"actions": [
							{
								"type": "origins:play_sound",
								"sound": "minecraft:block.respawn_anchor.charge",
								"volume": 0.45,
								"pitch": 2
							},
							{
								"type": "origins:add_velocity",
								"x": 0,
								"y": 0,
								"z": 25,
								"space": "local"
							}
						]
					}
				}
			},
			{
				"type": "origins:play_sound",
				"sound": "minecraft:item.trident.throw",
				"volume": 0.45,
				"pitch": 1.4
			}
		]
	}
}